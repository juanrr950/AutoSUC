{% extends 'main/master.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load LBD_filter_form %}
{% load customtags %}
<meta charset="utf-8">
{% block title %}
    {% if pk %}
    SUC <b>{{form.instance.nombre}}</b>
    {% else %}
        Nuevo SUC
    {% endif %}
    
{% endblock %}
{% block imports %}
<script src="{% static 'js/form_suc.js' %}" type="text/javascript"></script>
    
{% endblock %}
{% block content %}

<div class="card">
    <div class="card-body">
        <div class="container-fluid">
            {% comment %}
            Descomentar si el formulario tiene archivos
                {{form.media}}
            {% endcomment %}
            <form class="form-horizontal" enctype="multipart/form-data" method="post" novalidate>
                {% csrf_token %}
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Datos SUC      
                    </div>
                    <div class="col-sm-10">
                        {% with form.nombre|as_crispy_field as a %}
                        {% with form.car_ftth_iua|as_crispy_field as b %}
                        {% with form.fecha_ar|as_crispy_field as c %}
                        {% with form.cto|as_crispy_field as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        {% with form.poste_central|as_crispy_field as a %}
                        {% with form.plantilla|as_crispy_field as b %}
                        {% with form.comentarios|as_crispy_field as c %}
                        {% with "" as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                                                                                            
                    </div>  
                </div>
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Dirección      
                    </div>
                    <div class="col-sm-10">
                        {% with form.provincia|as_crispy_field as a %}
                        {% with form.ciudad|as_crispy_field as b %}
                        {% with form.tipo_via|as_crispy_field as c %}
                        {% with form.via|as_crispy_field as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        {% with form.numero_via|as_crispy_field as a %}
                        {% with form.codigo_miga|as_crispy_field as b %}
                        {% with form.nombre_central|as_crispy_field as c %}
                        {% with "" as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}                                                                    
                    </div>  
                </div>
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Postes      
                    </div>
                    <div class="col-sm-10">
                        {% with form.poste_1|as_crispy_field as a %}
                        {% with form.poste_2|as_crispy_field as b %}
                        {% with form.poste_3|as_crispy_field as c %}
                        {% with "" as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        {% with form.poste_4|as_crispy_field as a %}
                        {% with form.poste_5|as_crispy_field as b %}
                        {% with "" as c %}
                        {% with "" as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        {% with form.medida_1_2|as_crispy_field as a %}
                        {% with form.medida_2_3|as_crispy_field as b %}
                        {% with form.medida_3_4|as_crispy_field as c %}
                        {% with form.medida_4_5|as_crispy_field as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        
                    </div>  
                </div>
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Técnico      
                    </div>
                    <div class="col-sm-10">
                        
                        {% with form.nombre_tecnico|as_crispy_field as a %}
                        {% with form.apellido_tecnico|as_crispy_field as b %}
                        {% with form.segundo_apellido_tecnico|as_crispy_field as c %}
                        {% with form.dni_tecnico|as_crispy_field as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        
                    </div>  
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Magic Copy Paste      
                    </div>
                    <div class="col-sm-10">
                        <textarea id="txtaData" onChange="rellenarCampos();" 
                            class="form-control" rows="2" 
                            style='height:unset !important;'></textarea>
                    </div>  
                </div>
                 
                <hr>
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Archivos      
                    </div>
                    <div class="col-sm-10">
                        {{form.imagen|as_crispy_field}}
                        {% if pk %}
                            {% if form.instance.excel %}
                            <a href="/media/{{form.instance.excel}}" >
                                <i class="fa fa-file-excel-o" aria-hidden="true"></i>
                                {{form.instance.excel|filename}}
                            </a> <br/>
                            {% endif %}
                            {% if form.instance.word %}
                            <a href="/media/{{form.instance.word}}" >
                                <i class="fa fa-file-word-o" aria-hidden="true"></i>
                                {{form.instance.word|filename}}
                                </a>
                            <br/>
                            {% endif %}
                            {% if form.instance.powerpoint %}
                            <a href="/media/{{form.instance.powerpoint}}" >
                            <i class="fa fa-file-powerpoint-o" aria-hidden="true"></i>
                            {{form.instance.powerpoint|filename}}
                            </a>
                            <br/>
                            {% endif %}
                            <a href="/suc/donwload_zip_suc/{{pk}}" role="button" 
                                class="btn btn-wd btn-info">
                                <span class="btn-label">
                                    <i class="nc-icon nc-cloud-download-93"></i>
                                     Descargar SUC
                                </span>
                                
                            </a>
                            
                        {% endif  %}

                        
                        
                    </div>  
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-2 left-title">
                      Estados      
                    </div>
                    <div class="col-sm-10">
                        
                        {% with form.enviado|as_crispy_field as a %}
                        {% with form.facturado|as_crispy_field as b %}
                        {% with form.pagado|as_crispy_field as c %}
                        {% with "" as d %}
                            {% include 'gentemp/4_cols_resp.html' with a=a b=b c=c d=d %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                        
                        
                    </div>  
                </div>
                <hr>
                <div class="row">
                    <div class="col">
                        {% if pk %}
                        <script>
                            function delete_object(){
                                confirmDialog(
                                    "¿Eliminar SUX {{form.instance.nombre}}?",
                                    `Confirme para eliminar completamente. \r\n
                                     `,
                                    "/suc/delete_suc/{{pk}}");
                            }
                        </script>
                        <button type="button" onclick="delete_object();"
                         class="btn btn-wd btn-danger btn-outline">
                            <span class="btn-label">
                                <i class="fa fa-trash"></i>
                            </span>
                            Eliminar
                        </button>
                        {% endif %}
                    </div>
                    <div class="col">
                        <div style="text-align:right;">
                        <a href="/suc/list/list" >Listado de SUC</a>&nbsp&nbsp&nbsp
                        <button type="submit" class="btn btn-fill btn-info btn-wd">
                        <i class="fa fa-floppy-o" aria-hidden="true"></i>
                        Guardar cambios
                        </button>
                        </div>
                    </div>
                </div>
                
            </form>
        </div>
    </div>
</div>
{% endblock %}